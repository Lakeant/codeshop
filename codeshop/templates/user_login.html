<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
 <head> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <title>用户 - 登陆注册</title> 
  <meta name="keywords" content="101code 注册 登陆 共享知识 收获快乐" /> 
  <link rel="stylesheet" href="/static/css/home.css" type="text/css" />

   {% include "head_include.html" %}
  <link href="/static/css/bootstrap.min.css" rel="stylesheet">
  <link href="/static/css/gloab.css" rel="stylesheet">
  <link href="/static/css/login.css" rel="stylesheet">
  <script src="/static/js/jquery-1.11.1.min.js"></script>
  <script src="/static/js/register.js"></script>


  <!--[if IE 6]>
    <script src="/static/js/DD_belatedPNG_0.0.8a.min.js"></script>
    <script type="text/javascript">DD_belatedPNG.fix('.png_bg');</script>
    <![endif]--> 
 </head>
 <body> 
  <div class="header" style='background-color: white;border-bottom: 5px solid #ffb933;'> 
 {% include "topbar.html" %}
  </div> 
  <div class="top png_bg"> </div> 
  <div class="center"> 


  <div class="bgf4">
<div class="login-box f-mt10 f-pb50">
  <div class="main bgf">    
      <div class="reg-box-pan display-inline">  
          <div class="step">          
                <ul>

                    <li class="col-xs-4 on">
                        <span class="num"><em class="f-r5"></em><i>1</i></span>                 
                        <span class="line_bg lbg-r"></span>
                        <p class="lbg-txt">填写账户信息</p>
                    </li>
                    <li class="col-xs-4">
                        <span class="num"><em class="f-r5"></em><i>2</i></span>
                        <span class="line_bg lbg-l"></span>
                        <span class="line_bg lbg-r"></span>
                        <p class="lbg-txt">登陆成功</p>
                    </li>
                    <li class="col-xs-4">
                        <span class="num"><em class="f-r5"></em><i>3</i></span>
                        <span class="line_bg lbg-l"></span>
                        <p class="lbg-txt">跳转成功</p>
                    </li>

                </ul>
            </div>
          <div class="reg-box" id="verifyCheck" style="margin-top:50px;">
                <div class="part3" style="margin-top:50px;">
                  <div class="item col-xs-12">
                        <span class="intelligent-label f-fl"><b class="ftx04">*</b>邮箱：</span>    
                        <div class="f-fl item-ifo">
                            <input type="text" class="txt03 f-r3 required" keycodes="tel" tabindex="2" data-valid="isNonEmpty||isEmail" data-error="邮箱不能为空||邮箱格式不正确" maxlength="100" id="email" /> 
                            <span class="ie8 icon-close close hide"></span>                           
                            <label class="icon-sucessfill blank hide"></label>
                            <label class="focus valid"></label>
                        </div>
                    </div>




                    <div class="item col-xs-12">
                        <span class="intelligent-label f-fl"><b class="ftx04">*</b>密码：</span>    
                        <div class="f-fl item-ifo">
                            <input type="password" id="password" maxlength="20" class="txt03 f-r3 required" tabindex="3" style="ime-mode:disabled;" onpaste="return  false" autocomplete="off" data-valid="isNonEmpty||between:6-20||level:2" data-error="密码不能为空||密码长度6-20位||该密码太简单，有被盗风险，建议字母+数字的组合" /> 
                            <span class="ie8 icon-close close hide" style="right:55px"></span>
                            <span class="showpwd" data-eye="password"></span>                        
                            <label class="icon-sucessfill blank hide"></label>
                            <label class="focus valid"></label>
                            <span class="clearfix"></span>   
                        </div>
                    </div>


                    <div class="item col-xs-12">
                        <span class="intelligent-label f-fl">&nbsp;</span>    
                        <div class="f-fl item-ifo">
                           <a href="javascript:;" class="btn btn-blue f-r3" id="btn_part3">登陆</a>                         
                        </div>
                    </div>
                </div>  
                <div class="part4 text-center" style="display:none">
                  <h3 id='reg_success_tip'>登陆成功，正在跳转</h3>
                    <p class="c-666 f-mt30 f-mb50">页面将在 <strong id="times" class="f-size18">10</strong> 秒钟后，跳转到 <a href="/" class="c-blue">主页</a></p>
                </div>          
            </div>
        </div>
    </div>
</div>
<div class="m-sPopBg" style="z-index:998;"></div>
<div class="m-sPopCon regcon">
  <div class="m-sPopTitle"><strong>服务协议条款</strong><b id="sPopClose" class="m-sPopClose" onClick="closeClause()">×</b></div>
    <div class="apply_up_content">
      <pre class="f-r0">
    <strong>同意以下服务条款，提交注册信息</strong>
        </pre>
    </div>
    <center><a class="btn btn-blue btn-lg f-size12 b-b0 b-l0 b-t0 b-r0 f-pl50 f-pr50 f-r3" href="javascript:closeClause();">已阅读并同意此条款</a></center>
</div>





</div>

  </div> 
  <div class="footer png_bg"> 
  </div> 

  <div class="footer"> 
  {% include "foot.html" %}
  </div> 
  <div id="u-gotop" style="display:block;"> 
   <a href="javascript:;" title="回到顶部">回到顶部</a> 
  </div> 
 {% include "js_include.html" %}



 <script type="text/javascript">
$(function(){ 
  $.ajaxSetup({ 
       beforeSend: function(xhr, settings) {
           function getCookie(name) {
               var cookieValue = null;
               if (document.cookie && document.cookie != '') {
                   var cookies = document.cookie.split(';');
                   for (var i = 0; i < cookies.length; i++) {
                       var cookie = jQuery.trim(cookies[i]);
                       // Does this cookie string begin with the name we want?
                       if (cookie.substring(0, name.length + 1) == (name + '=')) {
                           cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                           break;
                       }
                   }
               }
               return cookieValue;
           }
           if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
               // Only send the token to relative URLs i.e. locally.
               xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
           }
       } 
  });

 //邮件验证码
  $("#btn_part3").click(function(){   
     // 使用post提交
    email=$('#email').val();
    password=$('#password').val();
    p_data={'email':email,'password':password};

     $.post("/user_login/",p_data,function(data){

      // 提交成功后的操作，data为返回参数
      if(data.valid!=1){
        alert("登陆失败了："+data['mess']+"！请重试......");
        return;
      }else{
        alert("登陆成功");
        $(".part3").hide();
        $(".step li").eq(0).addClass("on");
        $(".step li").eq(1).removeClass("on");
        $(".step li").eq(2).addClass("on");
        $(".part4").show();
        countdown({
          maxTime:30,
          ing:function(c){
            $("#times").text(c);
          },
          after:function(){
            window.location.href="/";   
          }
        });  

      }

      ;
     },"json");

  });


});
 </script>


 </body>
</html>